{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://react-ssr/./src/server/createStore.js","webpack://react-ssr/./src/server/http.js","webpack://react-ssr/./src/server/render.js","webpack://react-ssr/./src/share/pages/Home.js","webpack://react-ssr/./src/share/pages/List.js","webpack://react-ssr/./src/share/routes.js","webpack://react-ssr/./src/share/store/actions/user.action.js","webpack://react-ssr/./src/share/store/reducers/index.js","webpack://react-ssr/./src/share/store/reducers/user.reducer.js","webpack://react-ssr/external commonjs \"axios\"","webpack://react-ssr/external commonjs \"core-js/modules/es.array.concat.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.array.filter.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.array.iterator.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.array.map.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.function.name.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.object.get-own-property-descriptor.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.object.get-own-property-descriptors.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.object.keys.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.object.to-string.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.promise.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.string.iterator.js\"","webpack://react-ssr/external commonjs \"core-js/modules/es.symbol.js\"","webpack://react-ssr/external commonjs \"core-js/modules/web.dom-collections.for-each.js\"","webpack://react-ssr/external commonjs \"core-js/modules/web.dom-collections.iterator.js\"","webpack://react-ssr/external commonjs \"express\"","webpack://react-ssr/external commonjs \"react\"","webpack://react-ssr/external commonjs \"react-dom/server\"","webpack://react-ssr/external commonjs \"react-redux\"","webpack://react-ssr/external commonjs \"react-router-config\"","webpack://react-ssr/external commonjs \"react-router-dom\"","webpack://react-ssr/external commonjs \"redux\"","webpack://react-ssr/external commonjs \"redux-thunk\"","webpack://react-ssr/external commonjs \"regenerator-runtime/runtime.js\"","webpack://react-ssr/webpack/bootstrap","webpack://react-ssr/webpack/runtime/compat get default export","webpack://react-ssr/webpack/runtime/define property getters","webpack://react-ssr/webpack/runtime/hasOwnProperty shorthand","webpack://react-ssr/webpack/runtime/make namespace object","webpack://react-ssr/./src/server/index.js"],"sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducers from '../share/store/reducers';\n\nexport default () => createStore(reducers, {}, applyMiddleware(thunk));\n","import express from 'express'\n\nconst app = express()\n\n// 访问静态资源路径\napp.use(express.static('public'))\n\napp.listen(3000, () => {\n    console.log(`app is running 3000`);\n})\n\nexport default app;","import React from 'react';\nimport Home from '../share/pages/Home';\nimport { renderToString } from 'react-dom/server';\nimport { StaticRouter } from 'react-router-dom';\nimport { renderRoutes } from 'react-router-config';\nimport routes from '../share/routes';\nimport { Provider } from 'react-redux';\n\nexport default (req, store) => {\n  const content = renderToString(\n    <Provider store={store}>\n      <StaticRouter location={req.path}>{renderRoutes(routes)}</StaticRouter>\n    </Provider>,\n  );\n\n  const initialState = JSON.stringify(store.getState());\n\n  return `\n    <html>\n      <head title=\"react-ssr\"></head>\n        <body>\n            <div id=\"root\">${content}</div>\n            <script>window.INITIAL_STATE = ${initialState}</script>\n            <script src=\"bundle.js\"></script>\n        </body>\n    </html>\n    `;\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default () => {\n  return (\n    <div onClick={() => console.log(111)}>\n      home works112221\n      <Link to=\"/list\">jump to list</Link>\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUser } from '../store/actions/user.action';\n\nfunction List({ user = [], dispatch }) {\n  useEffect(() => {\n    dispatch(fetchUser());\n  }, []);\n\n  return (\n    <div>\n      {user.map((item, index) => (\n        <div key={index}>{item.name}</div>\n      ))}\n    </div>\n  );\n}\n\nfunction loadData(store) {\n  return store.dispatch(fetchUser());\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default {\n  component: connect(mapStateToProps)(List),\n  loadData,\n};\n","import Home from './pages/Home';\nimport List from './pages/List';\n\nexport default [\n  {\n    path: '/',\n    component: Home,\n    exact: true,\n  },\n  {\n    path: '/list',\n    ...List,\n  },\n];\n","import axios from 'axios';\n\nexport const SAVE_USER = 'save_user';\n// 发送请求 获取用户列表数据\n\nexport const fetchUser = () => async (dispatch) => {\n  let response = await axios.get('https://jsonplaceholder.typicode.com/users');\n\n  dispatch({\n    type: SAVE_USER,\n    payload: response,\n  });\n};\n","import { combineReducers } from 'redux';\nimport userReducer from './user.reducer';\n\nexport default combineReducers({\n  user: userReducer,\n});\n","import { SAVE_USER } from '../actions/user.action';\n\nexport default (state = [], action) => {\n  switch (action.type) {\n    case SAVE_USER:\n      return action.payload.data;\n    default:\n      return state;\n  }\n};\n","module.exports = require(\"axios\");","module.exports = require(\"core-js/modules/es.array.concat.js\");","module.exports = require(\"core-js/modules/es.array.filter.js\");","module.exports = require(\"core-js/modules/es.array.iterator.js\");","module.exports = require(\"core-js/modules/es.array.map.js\");","module.exports = require(\"core-js/modules/es.function.name.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptor.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptors.js\");","module.exports = require(\"core-js/modules/es.object.keys.js\");","module.exports = require(\"core-js/modules/es.object.to-string.js\");","module.exports = require(\"core-js/modules/es.promise.js\");","module.exports = require(\"core-js/modules/es.string.iterator.js\");","module.exports = require(\"core-js/modules/es.symbol.js\");","module.exports = require(\"core-js/modules/web.dom-collections.for-each.js\");","module.exports = require(\"core-js/modules/web.dom-collections.iterator.js\");","module.exports = require(\"express\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-config\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"regenerator-runtime/runtime.js\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import app from './http';\nimport render from './render';\nimport createStore from './createStore';\nimport { matchRoutes } from 'react-router-config';\nimport routes from '../share/routes';\n\napp.get('*', (req, res) => {\n  //1、请求地址 req.path\n  //2、获取路由配置信息，routes\n  //3、根据请求地址匹配出要渲染的组件的路由对象信息\n  const store = createStore();\n  const promise = matchRoutes(routes, req.path).map(({ route }) => {\n    if (route.loadData) return route.loadData(store);\n  });\n\n  Promise.all(promise).then(() => {\n    res.send(render(req, store));\n  });\n  res.send(render(req, store));\n});\n"],"names":["createStore","applyMiddleware","thunk","reducers","express","app","use","static","listen","console","log","React","Home","renderToString","StaticRouter","renderRoutes","routes","Provider","req","store","content","path","initialState","JSON","stringify","getState","Link","useEffect","connect","fetchUser","List","user","dispatch","map","item","index","name","loadData","mapStateToProps","state","component","exact","axios","SAVE_USER","get","response","type","payload","combineReducers","userReducer","action","data","render","matchRoutes","res","promise","route","Promise","all","then","send"],"sourceRoot":""}